{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jordy/Documents/GitHub/digitalOcean-spaces/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jordy/Documents/GitHub/digitalOcean-spaces/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jordy/Documents/GitHub/digitalOcean-spaces/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ImageForm=function ImageForm(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),uploadPercentage=_useState6[0],setUploadPercentage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var handleChange=function handleChange(e){setFile(e.target.files[0]);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setLoading(true);formData=new FormData();formData.append(\"file\",file);formData.append(\"title\",title);_context.next=7;return axios.post(\"/api/images/upload\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"},onUploadProgress:function onUploadProgress(progressEvent){var loaded=progressEvent.loaded,total=progressEvent.total;var percent=parseInt(loaded*100/total);setUploadPercentage(percent);}});case 7:res=_context.sent;setLoading(false);setUploadPercentage(0);console.log(res);case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 offset-md-4\",children:[loading&&/*#__PURE__*/_jsx(\"div\",{className:\"progress rounded-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar progress-bar-striped bg-success\",role:\"progressbar\",style:{width:\"\".concat(uploadPercentage,\"%\")},children:[uploadPercentage,\"%\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card bg-dark text-light rounded-0 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 card-title\",children:\"Subir Imagen\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-dark text-light my-3\",placeholder:\"Escribe un titulo para tu foto\",onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control bg-dark text-light rounded-0 border border-secondary\",onChange:handleChange}),/*#__PURE__*/_jsx(\"div\",{className:\"my-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success rounded-0 w-100\",disabled:loading||!file,children:!loading?\"Upload\":/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm\",role:\"status\",\"aria-hidden\":\"true\"})})})]})]})})]});};export default ImageForm;","map":{"version":3,"sources":["/Users/jordy/Documents/GitHub/digitalOcean-spaces/src/pages/ImageForm.js"],"names":["React","useState","axios","ImageForm","file","setFile","title","setTitle","uploadPercentage","setUploadPercentage","loading","setLoading","handleChange","e","target","files","handleSubmit","preventDefault","formData","FormData","append","post","headers","onUploadProgress","progressEvent","loaded","total","percent","parseInt","res","console","log","width","value"],"mappings":"qfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eACEF,QAAQ,EADV,wCACfG,IADe,eACTC,OADS,8BAEIJ,QAAQ,CAAC,EAAD,CAFZ,yCAEfK,KAFe,eAERC,QAFQ,8BAG0BN,QAAQ,CAAC,CAAD,CAHlC,yCAGfO,gBAHe,eAGGC,mBAHH,8BAIQR,QAAQ,CAAC,KAAD,CAJhB,yCAIfS,OAJe,eAINC,UAJM,eAMtB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BR,OAAO,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,0FAAG,iBAAOH,CAAP,mIACnBA,CAAC,CAACI,cAAF,GAEAN,UAAU,CAAC,IAAD,CAAV,CAEMO,QALa,CAKF,GAAIC,CAAAA,QAAJ,EALE,CAMnBD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBhB,IAAxB,EACAc,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBd,KAAzB,EAPmB,sBASDJ,CAAAA,KAAK,CAACmB,IAAN,CAAW,oBAAX,CAAiCH,QAAjC,CAA2C,CAC3DI,OAAO,CAAE,CACP,eAAgB,qBADT,CADkD,CAI3DC,gBAAgB,CAAE,0BAACC,aAAD,CAAmB,IAC3BC,CAAAA,MAD2B,CACTD,aADS,CAC3BC,MAD2B,CACnBC,KADmB,CACTF,aADS,CACnBE,KADmB,CAGnC,GAAIC,CAAAA,OAAO,CAAGC,QAAQ,CAAEH,MAAM,CAAG,GAAV,CAAiBC,KAAlB,CAAtB,CACAjB,mBAAmB,CAACkB,OAAD,CAAnB,CACD,CAT0D,CAA3C,CATC,QASbE,GATa,eAqBnBlB,UAAU,CAAC,KAAD,CAAV,CACAF,mBAAmB,CAAC,CAAD,CAAnB,CAEAqB,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAxBmB,uDAAH,kBAAZb,CAAAA,YAAY,4CAAlB,CA2BA,mBACE,aAAK,SAAS,CAAC,sBAAf,WACGN,OAAO,eACN,YAAK,SAAS,CAAC,oBAAf,uBACE,aACE,SAAS,CAAC,8CADZ,CAEE,IAAI,CAAC,aAFP,CAGE,KAAK,CAAE,CAAEsB,KAAK,WAAKxB,gBAAL,KAAP,CAHT,WAKGA,gBALH,OADF,EAFJ,cAaE,YAAK,SAAS,CAAC,uCAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,eAAd,0BADF,cAEE,cAAM,QAAQ,CAAEQ,YAAhB,wBAEE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,sCAFZ,CAGE,WAAW,CAAC,gCAHd,CAIE,QAAQ,CAAE,kBAACH,CAAD,QAAON,CAAAA,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASmB,KAAV,CAAf,EAJZ,EAFF,cAQE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,mEAFZ,CAGE,QAAQ,CAAErB,YAHZ,EARF,cAaE,YAAK,SAAS,CAAC,MAAf,uBACE,eACE,SAAS,CAAC,iCADZ,CAEE,QAAQ,CAAEF,OAAO,EAAI,CAACN,IAFxB,UAIG,CAACM,OAAD,CACC,QADD,cAGC,aACE,SAAS,CAAC,kCADZ,CAEE,IAAI,CAAC,QAFP,CAGE,cAAY,MAHd,EAPJ,EADF,EAbF,GAFF,GADF,EAbF,GADF,CAmDD,CAxFD,CA0FA,cAAeP,CAAAA,SAAf","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst ImageForm = () => {\n  const [file, setFile] = useState();\n  const [title, setTitle] = useState(\"\");\n  const [uploadPercentage, setUploadPercentage] = useState(0);\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    setLoading(true);\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", title);\n\n    const res = await axios.post(\"/api/images/upload\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      onUploadProgress: (progressEvent) => {\n        const { loaded, total } = progressEvent;\n\n        let percent = parseInt((loaded * 100) / total);\n        setUploadPercentage(percent);\n      },\n    });\n\n    setLoading(false);\n    setUploadPercentage(0);\n\n    console.log(res);\n  };\n\n  return (\n    <div className=\"col-md-4 offset-md-4\">\n      {loading && (\n        <div className=\"progress rounded-0\">\n          <div\n            className=\"progress-bar progress-bar-striped bg-success\"\n            role=\"progressbar\"\n            style={{ width: `${uploadPercentage}%` }}\n          >\n            {uploadPercentage}%\n          </div>\n        </div>\n      )}\n\n      <div className=\"card bg-dark text-light rounded-0 p-4\">\n        <div className=\"card-body\">\n          <h1 className=\"h3 card-title\">Subir Imagen</h1>\n          <form onSubmit={handleSubmit}>\n            {/* Upload Input */}\n            <input\n              type=\"text\"\n              className=\"form-control bg-dark text-light my-3\"\n              placeholder=\"Escribe un titulo para tu foto\"\n              onChange={(e) => setTitle(e.target.value)}\n            />\n            <input\n              type=\"file\"\n              className=\"form-control bg-dark text-light rounded-0 border border-secondary\"\n              onChange={handleChange}\n            />\n            <div className=\"my-3\">\n              <button\n                className=\"btn btn-success rounded-0 w-100\"\n                disabled={loading || !file}\n              >\n                {!loading ? (\n                  \"Upload\"\n                ) : (\n                  <span\n                    className=\"spinner-border spinner-border-sm\"\n                    role=\"status\"\n                    aria-hidden=\"true\"\n                  ></span>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageForm;\n"]},"metadata":{},"sourceType":"module"}